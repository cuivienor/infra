---
# Apply base configuration to all LXC containers
# This ensures consistent locale, timezone, packages, and SSH keys

- name: Configure all containers with common base settings
  hosts:
    - backup_containers
    - samba_containers
    - ripper_containers
    - analyzer_containers
    - transcoder_containers
    - jellyfin_containers
    - dns_containers
    - proxy_containers
    - wishlist_containers
  become: true
  gather_facts: true

  roles:
    - role: common
      tags: ['common', 'base']

  post_tasks:
    - name: Verify container configuration
      ansible.builtin.debug:
        msg: |
          Container: {{ inventory_hostname }}
          IP: {{ ansible_facts['default_ipv4'].address }}
          Hostname: {{ ansible_facts['hostname'] }}
          Timezone: {{ ansible_facts['date_time'].tz }}
      tags: ['verify']
