---
# Authelia SSO default configuration

# Authelia version
authelia_version: "4.39.15"

# Installation paths
authelia_config_dir: "/etc/authelia"
authelia_data_dir: "/var/lib/authelia"
authelia_user: "authelia"
authelia_group: "authelia"

# Server configuration
authelia_address: "0.0.0.0"
authelia_port: 9091

# Domain configuration
authelia_domain: "paniland.com"
authelia_auth_url: "https://auth.paniland.com"
authelia_default_redirect_url: "https://wishlist.paniland.com"

# Session configuration
authelia_session_name: "authelia_session"
authelia_session_expiration: "1h"
authelia_session_inactivity: "5m"
authelia_session_remember_me: "1M"

# TOTP configuration
authelia_totp_issuer: "Paniland Homelab"
authelia_totp_period: 30
authelia_totp_digits: 6

# Access control default policy
# Options: deny, one_factor, two_factor, bypass
authelia_default_policy: "deny"

# Secrets - MUST be overridden in vault
authelia_jwt_secret: ""
authelia_session_secret: ""
authelia_storage_encryption_key: ""

# Authentication backend type: file or ldap
authelia_auth_backend: "file"

# LDAP backend configuration (when authelia_auth_backend: ldap)
# Use implementation: lldap for LLDAP server
authelia_ldap_implementation: "lldap"
authelia_ldap_address: "ldap://lldap.home.arpa:3890"
authelia_ldap_base_dn: "dc=paniland,dc=com"
authelia_ldap_user: ""      # DN of service account (from vault)
authelia_ldap_password: ""  # Service account password (from vault)

# User database - only used when authelia_auth_backend: file
authelia_users: []
# Example:
# authelia_users:
#   - username: peter
#     displayname: Peter
#     email: peter@example.com
#     password_hash: "$argon2id$..."
#     groups:
#       - admins

# Access control rules
authelia_access_rules: []
# Example:
# authelia_access_rules:
#   - domain: "wishlist.paniland.com"
#     policy: "one_factor"

# Notifier configuration
# Options: filesystem, smtp
authelia_notifier_type: "filesystem"
authelia_notifier_filesystem_path: "/var/lib/authelia/notification.txt"

# SMTP configuration (when authelia_notifier_type: smtp)
# Address format: submissions://host:465 (implicit TLS) or submission://host:587 (STARTTLS)
authelia_smtp_address: ""
authelia_smtp_username: ""
authelia_smtp_password: ""
authelia_smtp_sender: ""
authelia_smtp_subject: "[Authelia] {title}"

# OIDC provider configuration
authelia_oidc_enabled: false
authelia_oidc_hmac_secret: ""
authelia_oidc_private_key: ""  # RSA private key in PEM format
authelia_oidc_private_key_file: "{{ authelia_config_dir }}/oidc.pem"

# Brute-force protection (regulation)
# Ban users after failed login attempts
authelia_regulation_max_retries: 3
authelia_regulation_find_time: "2m"    # Window to count failures
authelia_regulation_ban_time: "5m"     # How long to ban after max_retries

# OIDC clients - list of applications that can use Authelia for authentication
authelia_oidc_clients: []
# Example:
# authelia_oidc_clients:
#   - client_id: wishlist
#     client_name: Wishlist
#     client_secret: "hashed_secret"  # Use authelia hash-password to generate
#     redirect_uris:
#       - https://wishlist.paniland.com/auth/callback/authelia
#     scopes:
#       - openid
#       - profile
#       - email
#     authorization_policy: one_factor
